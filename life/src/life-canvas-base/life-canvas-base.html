<html><head><link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../cell.html">




</head><body><dom-module id="life-canvas-base">
  <template>
    <canvas id="canvas" width$="[[_canvasWidth]]" height$="[[_canvasHeight]]">Your browser doesn't support html5 canvas.</canvas>

  </template>

  <style>
  </style>

  <script>Polymer({is:"life-canvas-base",properties:{_canvasWidth:{type:Number},_canvasHeight:{type:Number},_cellWidth:{type:Number},_cellHeight:{type:Number},width:{type:Number,value:20},height:{type:Number,value:20},mode:{type:String,value:"cell"},cellSize:{type:Number,value:4},_gameManager:{type:Object},isPlaying:{type:Boolean,value:!1},refreshRate:{type:Number,value:300},background:{type:String},color:{type:String,value:"rgb(255, 0, 0)"},backgroundColor:{type:String,value:"rgb(238, 238, 238)"}},observers:["_handleSizeChanged(width, height, cellSize, mode)"],ready:function(){this.mainLoop()},_handleSizeChanged:function(e,a,t,i){"cell"===i?(this._canvasWidth=e*t,this._canvasHeight=a*t,this._cellWidth=e,this._cellHeight=a):"canvas"===i&&(this._canvasWidth=e,this._canvasHeight=a,this._cellWidth=Math.floor(e/t),this._cellHeight=Math.floor(a/t)),this.initialize()},initialize:function(){this._gameManager=new GameManager(this._cellWidth,this._cellHeight,this.cellSize,this.$.canvas)},getCanvas:function(){return this.$.canvas},getCanvasDataURL:function(){return this.$.canvas.toDataURL()},getRLE:function(){return this._gameManager._encodeRLE()},injectPattern:function(e,a,t,i){this._gameManager.injectPattern(e,a,t,i),this._gameManager.draw(i)},injectOverlay:function(e,a,t,i){this._gameManager.injectOverlay(e,a,t,i)},clearCanvas:function(){this._gameManager.clearCanvas()},mainLoop:function(){this.isPlaying&&(this._gameManager.refreshCanvas(this.backgroundColor,this.background),this._gameManager.draw(this.color),this._gameManager.update(),this.fire("game-loop-end")),setTimeout(function(){this.mainLoop()}.bind(this),this.refreshRate)}});</script>
</dom-module>
</body></html>